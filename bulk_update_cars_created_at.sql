-- Bulk update created_at dates for cars using chassis numbers
-- Run this in your Supabase SQL Editor

-- First, let's verify which cars will be affected (optional - run this first to check)
/*
SELECT 
    chassis_number, 
    stock_number,
    vehicle_model,
    created_at as current_created_at
FROM cars 
WHERE chassis_number IN (
    'YV1A2ALF4J1331304', 'W1N0G8AB4MF919439', 'WDDYJ7KA3LA028832',
    'W1NOG8ABXMF924340', 'W1K3F8HB8MN228066', 'WDDXK8CB5GA020341',
    'W1NDM2EB8PA025415', 'WDDWF8AB0LR530692', 'WDC0G8BB5LF741085',
    'WDDSJ4GB6JN595547', 'W1NFF5KE5LA232356', 'WDDZF4JB3JA437568',
    'W1KMJ5AB9RF036829', 'WDCDF7DE3JB032536', 'W1K5J4HB0SN485834',
    'W1NFD6BB6MA562591', 'W1K3G8HB2SJ492711', 'W1K5J4HB7SN524841',
    'W1K3F5EB9NN282254', 'W1NKM5BB8SF257215', 'WDB1070481A065282',
    'W1N1679891A409144', 'WDD1993761M000477', 'WDCYC7CF2HX264806',
    'W1V44781513792418', 'WDC0G4GB2JF417297', 'WDDYJ7KA0JA018739',
    'WDD2229861A326762', 'W1NFF5KE2NA590033', 'WDDJK7EA8EF029166',
    'WDB4632761X311236', 'WDD2130611A944779', 'WDD2906891A002600',
    'W1K3G5BB6PJ384378', 'WDCFB5KE8LA100706', 'WDDXJ7JB3FA010325',
    'WDDUG8GB9JA376538', 'W1NFD8KB1NA706612', 'W1NFD8KB1PA854987',
    'W1KMJ6CB9RF024148', 'W1KLF4GB5RA069029', 'W1NKM8HBXRF147298',
    'W1KAF8HB6PR109209', 'W1K3F8HB8RN323265', 'W1K3G5BB5PJ413613',
    'W1KAF4CB6RR159806', 'W1K2J5KB1NA097007', 'W1NKM5BB7RF082207',
    'W1NFF5KE5RB047663', 'W1K5J4HB9SN513503', 'W1N4N8HB0RJ597531',
    'W1NFF5KE6RB101360', 'W1NYC7GJ9RX501077'
)
ORDER BY chassis_number;
*/

-- MAIN UPDATE QUERY - Updates created_at dates for all specified cars
UPDATE cars 
SET created_at = new_dates.new_created_at,
    updated_at = timezone('utc'::text, now()) -- Also update the updated_at timestamp
FROM (VALUES 
    ('YV1A2ALF4J1331304', '2024-11-06 16:55:15+00'::timestamptz),
    ('W1N0G8AB4MF919439', '2024-12-24 14:24:17+00'::timestamptz),
    ('WDDYJ7KA3LA028832', '2024-11-26 14:24:17+00'::timestamptz),
    ('W1NOG8ABXMF924340', '2025-04-03 11:43:05+00'::timestamptz),
    ('W1K3F8HB8MN228066', '2025-04-17 13:15:21+00'::timestamptz),
    ('WDDXK8CB5GA020341', '2025-04-17 13:32:17+00'::timestamptz),
    ('W1NDM2EB8PA025415', '2025-02-17 11:20:01+00'::timestamptz),
    ('WDDWF8AB0LR530692', '2025-06-09 14:41:05+00'::timestamptz),
    ('WDC0G8BB5LF741085', '2025-06-10 14:15:00+00'::timestamptz),
    ('WDDSJ4GB6JN595547', '2025-06-13 11:16:39+00'::timestamptz),
    ('W1NFF5KE5LA232356', '2025-06-16 10:06:08+00'::timestamptz),
    ('WDDZF4JB3JA437568', '2025-06-16 12:35:24+00'::timestamptz),
    ('W1KMJ5AB9RF036829', '2025-06-25 17:47:02+00'::timestamptz),
    ('WDCDF7DE3JB032536', '2025-06-26 09:35:36+00'::timestamptz),
    ('W1K5J4HB0SN485834', '2025-07-02 12:56:23+00'::timestamptz),
    ('W1NFD6BB6MA562591', '2025-07-02 13:50:52+00'::timestamptz),
    ('W1K3G8HB2SJ492711', '2025-07-03 09:57:08+00'::timestamptz),
    ('W1K5J4HB7SN524841', '2025-07-03 15:09:10+00'::timestamptz),
    ('W1K3F5EB9NN282254', '2025-07-10 12:16:02+00'::timestamptz),
    ('W1NKM5BB8SF257215', '2025-07-15 13:26:56+00'::timestamptz),
    ('WDB1070481A065282', '2024-10-24 16:28:44+00'::timestamptz),
    ('W1N1679891A409144', '2024-11-27 13:24:46+00'::timestamptz),
    ('WDD1993761M000477', '2024-12-04 12:53:17+00'::timestamptz),
    ('WDCYC7CF2HX264806', '2024-12-13 14:29:28+00'::timestamptz),
    ('W1V44781513792418', '2025-01-27 13:37:21+00'::timestamptz),
    ('WDC0G4GB2JF417297', '2025-02-06 18:11:04+00'::timestamptz),
    ('WDDYJ7KA0JA018739', '2025-02-28 17:46:53+00'::timestamptz),
    ('WDD2229861A326762', '2025-04-23 13:45:58+00'::timestamptz),
    ('W1NFF5KE2NA590033', '2025-04-28 12:12:56+00'::timestamptz),
    ('WDDJK7EA8EF029166', '2025-05-16 14:40:52+00'::timestamptz),
    ('WDB4632761X311236', '2025-05-20 11:42:21+00'::timestamptz),
    ('WDD2130611A944779', '2025-05-26 08:32:21+00'::timestamptz),
    ('WDD2906891A002600', '2025-05-26 10:05:08+00'::timestamptz),
    ('W1K3G5BB6PJ384378', '2025-06-03 09:26:04+00'::timestamptz),
    ('WDCFB5KE8LA100706', '2025-06-04 14:30:28+00'::timestamptz),
    ('WDDXJ7JB3FA010325', '2025-06-11 11:50:42+00'::timestamptz),
    ('WDDUG8GB9JA376538', '2025-06-11 12:41:22+00'::timestamptz),
    ('W1NFD8KB1NA706612', '2025-06-18 13:25:14+00'::timestamptz),
    ('W1NFD8KB1PA854987', '2025-06-18 13:25:14+00'::timestamptz),
    ('W1KMJ6CB9RF024148', '2025-06-27 12:02:25+00'::timestamptz),
    ('W1KLF4GB5RA069029', '2025-06-27 12:25:42+00'::timestamptz),
    ('W1NKM8HBXRF147298', '2025-06-27 14:16:21+00'::timestamptz),
    ('W1KAF8HB6PR109209', '2025-06-27 14:36:15+00'::timestamptz),
    ('W1K3F8HB8RN323265', '2025-06-30 10:03:39+00'::timestamptz),
    ('W1K3G5BB5PJ413613', '2025-06-30 10:19:29+00'::timestamptz),
    ('W1KAF4CB6RR159806', '2025-06-30 11:01:32+00'::timestamptz),
    ('W1K2J5KB1NA097007', '2025-07-02 06:56:35+00'::timestamptz),
    ('W1NKM5BB7RF082207', '2025-07-02 07:02:15+00'::timestamptz),
    ('W1NFF5KE5RB047663', '2025-07-02 07:14:04+00'::timestamptz),
    ('W1K5J4HB9SN513503', '2025-07-03 15:18:11+00'::timestamptz),
    ('W1N4N8HB0RJ597531', '2025-07-08 18:02:00+00'::timestamptz),
    ('W1NFF5KE6RB101360', '2025-07-08 18:06:07+00'::timestamptz),
    ('W1NYC7GJ9RX501077', '2025-07-11 13:35:59+00'::timestamptz)
) AS new_dates(chassis_number, new_created_at)
WHERE cars.chassis_number = new_dates.chassis_number;

-- Verification query - run this after the update to confirm changes
SELECT 
    chassis_number,
    stock_number,
    vehicle_model,
    created_at,
    updated_at
FROM cars 
WHERE chassis_number IN (
    'YV1A2ALF4J1331304', 'W1N0G8AB4MF919439', 'WDDYJ7KA3LA028832',
    'W1NOG8ABXMF924340', 'W1K3F8HB8MN228066', 'WDDXK8CB5GA020341',
    'W1NDM2EB8PA025415', 'WDDWF8AB0LR530692', 'WDC0G8BB5LF741085',
    'WDDSJ4GB6JN595547', 'W1NFF5KE5LA232356', 'WDDZF4JB3JA437568',
    'W1KMJ5AB9RF036829', 'WDCDF7DE3JB032536', 'W1K5J4HB0SN485834',
    'W1NFD6BB6MA562591', 'W1K3G8HB2SJ492711', 'W1K5J4HB7SN524841',
    'W1K3F5EB9NN282254', 'W1NKM5BB8SF257215', 'WDB1070481A065282',
    'W1N1679891A409144', 'WDD1993761M000477', 'WDCYC7CF2HX264806',
    'W1V44781513792418', 'WDC0G4GB2JF417297', 'WDDYJ7KA0JA018739',
    'WDD2229861A326762', 'W1NFF5KE2NA590033', 'WDDJK7EA8EF029166',
    'WDB4632761X311236', 'WDD2130611A944779', 'WDD2906891A002600',
    'W1K3G5BB6PJ384378', 'WDCFB5KE8LA100706', 'WDDXJ7JB3FA010325',
    'WDDUG8GB9JA376538', 'W1NFD8KB1NA706612', 'W1NFD8KB1PA854987',
    'W1KMJ6CB9RF024148', 'W1KLF4GB5RA069029', 'W1NKM8HBXRF147298',
    'W1KAF8HB6PR109209', 'W1K3F8HB8RN323265', 'W1K3G5BB5PJ413613',
    'W1KAF4CB6RR159806', 'W1K2J5KB1NA097007', 'W1NKM5BB7RF082207',
    'W1NFF5KE5RB047663', 'W1K5J4HB9SN513503', 'W1N4N8HB0RJ597531',
    'W1NFF5KE6RB101360', 'W1NYC7GJ9RX501077'
)
ORDER BY created_at DESC;

-- Summary: This will update 53 cars with their correct created_at timestamps
-- All timestamps are set to UTC timezone (+00)
-- Also updates the updated_at field to track when this change was made 