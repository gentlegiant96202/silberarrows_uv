"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/inventory/page",{

/***/ "(app-pages-browser)/./components/modules/uv-crm/components/MediaUploader.tsx":
/*!****************************************************************!*\
  !*** ./components/modules/uv-crm/components/MediaUploader.tsx ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MediaUploader)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(app-pages-browser)/./lib/supabaseClient.ts\");\n\nvar _s = $RefreshSig$();\n\n\n// Function to add light grey gradient background to transparent PNGs\nconst addGradientBackground = async (file)=>{\n    return new Promise((resolve)=>{\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        const img = new Image();\n        img.onload = ()=>{\n            canvas.width = img.width;\n            canvas.height = img.height;\n            if (!ctx) {\n                resolve(file); // fallback to original if canvas context fails\n                return;\n            }\n            // Create light grey gradient background\n            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n            gradient.addColorStop(0, '#f8f8f8'); // Very light grey at top\n            gradient.addColorStop(0.5, '#e8e8e8'); // Light grey in middle\n            gradient.addColorStop(1, '#d8d8d8'); // Medium light grey at bottom\n            // Fill background with gradient\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            // Draw the original image on top\n            ctx.drawImage(img, 0, 0);\n            // Convert canvas back to file\n            canvas.toBlob((blob)=>{\n                if (blob) {\n                    const newFile = new File([\n                        blob\n                    ], file.name.replace(/\\.png$/i, '_with_bg.png'), {\n                        type: 'image/png',\n                        lastModified: Date.now()\n                    });\n                    resolve(newFile);\n                } else {\n                    resolve(file); // fallback to original\n                }\n            }, 'image/png', 0.95);\n        };\n        img.onerror = ()=>{\n            resolve(file); // fallback to original if image loading fails\n        };\n        img.src = URL.createObjectURL(file);\n    });\n};\n// Function to check if PNG has transparency\nconst hasPngTransparency = async (file)=>{\n    if (!file.type.includes('png')) return false;\n    return new Promise((resolve)=>{\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        const img = new Image();\n        img.onload = ()=>{\n            canvas.width = img.width;\n            canvas.height = img.height;\n            if (!ctx) {\n                resolve(false);\n                return;\n            }\n            ctx.drawImage(img, 0, 0);\n            try {\n                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                const data = imageData.data;\n                // Check for any pixels with alpha < 255 (transparency)\n                for(let i = 3; i < data.length; i += 4){\n                    if (data[i] < 255) {\n                        resolve(true);\n                        return;\n                    }\n                }\n                resolve(false);\n            } catch (error) {\n                // If we can't access image data (CORS, etc.), assume no transparency\n                resolve(false);\n            }\n        };\n        img.onerror = ()=>resolve(false);\n        img.src = URL.createObjectURL(file);\n    });\n};\nfunction MediaUploader(param) {\n    let { carId, onUploaded } = param;\n    _s();\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [totalFiles, setTotalFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [failedFiles, setFailedFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [retrying, setRetrying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const handleFiles = async (e)=>{\n        const files = Array.from(e.target.files || []);\n        if (!files.length) return;\n        setUploading(true);\n        setTotalFiles(files.length);\n        setProgress(0);\n        setFailedFiles([]);\n        let failed = [];\n        for(let idx = 0; idx < files.length; idx++){\n            const file = files[idx];\n            let uploadFile = file;\n            if (file.type.startsWith('image')) {\n                try {\n                    // Check if PNG has transparency and add background if needed\n                    if (file.type.includes('png')) {\n                        const hasTransparency = await hasPngTransparency(file);\n                        if (hasTransparency) {\n                            console.log(\"Adding light grey gradient background to transparent PNG: \".concat(file.name));\n                            uploadFile = await addGradientBackground(file);\n                        }\n                    }\n                // Note: Image compression removed - uploading original quality\n                } catch (err) {\n                    console.warn('Image processing failed, falling back to original', err);\n                }\n            }\n            const ext = file.name.split('.').pop();\n            const path = \"\".concat(carId, \"/\").concat(crypto.randomUUID(), \".\").concat(ext);\n            // Check if car already has media\n            const { count: photoCount } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_2__.supabase.from('car_media').select('*', {\n                head: true,\n                count: 'exact'\n            }).eq('car_id', carId).eq('kind', 'photo');\n            const isFirstPhoto = file.type.startsWith('image') && (!photoCount || photoCount === 0);\n            // Upload to Storage bucket 'car-media'\n            const { error: upErr } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_2__.supabase.storage.from('car-media').upload(path, uploadFile, {\n                contentType: uploadFile.type || file.type,\n                cacheControl: '3600',\n                upsert: false\n            });\n            if (upErr) {\n                failed.push({\n                    file,\n                    error: upErr.message\n                });\n                setFailedFiles([\n                    ...failed\n                ]);\n                setProgress(Math.round((idx + 1) / files.length * 100));\n                continue;\n            }\n            // Get permanent public URL\n            const { data: pub } = _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_2__.supabase.storage.from('car-media').getPublicUrl(path);\n            const url = pub.publicUrl;\n            // Increment sort_order for each new upload\n            let currentMaxSortOrder = idx; // fallback if not fetched\n            // Store the public URL in DB with proper sort_order\n            await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_2__.supabase.from('car_media').insert({\n                car_id: carId,\n                kind: file.type.startsWith('video') ? 'video' : 'photo',\n                url,\n                is_primary: isFirstPhoto,\n                sort_order: currentMaxSortOrder\n            });\n            setProgress(Math.round((idx + 1) / files.length * 100));\n        }\n        setProgress(100);\n        setTimeout(()=>{\n            setUploading(false);\n            setProgress(0);\n            setTotalFiles(0);\n            if (onUploaded) onUploaded();\n        }, 800);\n        e.target.value = '';\n    };\n    const retryFailed = async ()=>{\n        if (!failedFiles.length) return;\n        setRetrying(true);\n        // Retry only failed files\n        const filesToRetry = failedFiles.map((f)=>f.file);\n        setFailedFiles([]);\n        await handleFiles({\n            target: {\n                files: filesToRetry\n            }\n        });\n        setRetrying(false);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-1\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                className: \"block text-white/70 text-xs\",\n                children: \"Upload Photos / Videos\"\n            }, void 0, false, {\n                fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                lineNumber: 206,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"file\",\n                multiple: true,\n                accept: \"image/*,video/*\",\n                onChange: handleFiles,\n                disabled: uploading || retrying,\n                className: \"text-white text-xs\"\n            }, void 0, false, {\n                fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                lineNumber: 207,\n                columnNumber: 7\n            }, this),\n            uploading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-full bg-gray-700/50 h-3 rounded overflow-hidden relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-red-500 h-3 transition-all\",\n                        style: {\n                            width: \"\".concat(progress, \"%\")\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                        lineNumber: 217,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"absolute inset-0 text-[10px] flex items-center justify-center text-white/80\",\n                        children: [\n                            Math.max(progress, 1),\n                            \"% (\",\n                            Math.round(progress / 100 * totalFiles),\n                            \"/\",\n                            totalFiles,\n                            \")\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                        lineNumber: 221,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                lineNumber: 216,\n                columnNumber: 9\n            }, this),\n            failedFiles.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 text-xs text-red-400\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: \"Failed to upload:\"\n                    }, void 0, false, {\n                        fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                        lineNumber: 228,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                        className: \"list-disc ml-4\",\n                        children: failedFiles.map((param, idx)=>{\n                            let { file, error } = param;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: [\n                                    file.name,\n                                    \": \",\n                                    error\n                                ]\n                            }, idx, true, {\n                                fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                                lineNumber: 231,\n                                columnNumber: 15\n                            }, this);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                        lineNumber: 229,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"mt-1 px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700\",\n                        onClick: retryFailed,\n                        disabled: retrying,\n                        children: retrying ? 'Retrying...' : 'Retry Failed Uploads'\n                    }, void 0, false, {\n                        fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                        lineNumber: 234,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n                lineNumber: 227,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Volumes/SilberArrows/CODEBASE/silberarrows_uv/components/modules/uv-crm/components/MediaUploader.tsx\",\n        lineNumber: 205,\n        columnNumber: 5\n    }, this);\n}\n_s(MediaUploader, \"8VQVnNzTH/Y7+g0IosAIAGTctC0=\");\n_c = MediaUploader;\nvar _c;\n$RefreshReg$(_c, \"MediaUploader\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvbW9kdWxlcy91di1jcm0vY29tcG9uZW50cy9NZWRpYVVwbG9hZGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlDO0FBQ2U7QUFPaEQscUVBQXFFO0FBQ3JFLE1BQU1FLHdCQUF3QixPQUFPQztJQUNuQyxPQUFPLElBQUlDLFFBQVEsQ0FBQ0M7UUFDbEIsTUFBTUMsU0FBU0MsU0FBU0MsYUFBYSxDQUFDO1FBQ3RDLE1BQU1DLE1BQU1ILE9BQU9JLFVBQVUsQ0FBQztRQUM5QixNQUFNQyxNQUFNLElBQUlDO1FBRWhCRCxJQUFJRSxNQUFNLEdBQUc7WUFDWFAsT0FBT1EsS0FBSyxHQUFHSCxJQUFJRyxLQUFLO1lBQ3hCUixPQUFPUyxNQUFNLEdBQUdKLElBQUlJLE1BQU07WUFFMUIsSUFBSSxDQUFDTixLQUFLO2dCQUNSSixRQUFRRixPQUFPLCtDQUErQztnQkFDOUQ7WUFDRjtZQUVBLHdDQUF3QztZQUN4QyxNQUFNYSxXQUFXUCxJQUFJUSxvQkFBb0IsQ0FBQyxHQUFHLEdBQUcsR0FBR1gsT0FBT1MsTUFBTTtZQUNoRUMsU0FBU0UsWUFBWSxDQUFDLEdBQUcsWUFBYSx5QkFBeUI7WUFDL0RGLFNBQVNFLFlBQVksQ0FBQyxLQUFLLFlBQVksdUJBQXVCO1lBQzlERixTQUFTRSxZQUFZLENBQUMsR0FBRyxZQUFjLDhCQUE4QjtZQUVyRSxnQ0FBZ0M7WUFDaENULElBQUlVLFNBQVMsR0FBR0g7WUFDaEJQLElBQUlXLFFBQVEsQ0FBQyxHQUFHLEdBQUdkLE9BQU9RLEtBQUssRUFBRVIsT0FBT1MsTUFBTTtZQUU5QyxpQ0FBaUM7WUFDakNOLElBQUlZLFNBQVMsQ0FBQ1YsS0FBSyxHQUFHO1lBRXRCLDhCQUE4QjtZQUM5QkwsT0FBT2dCLE1BQU0sQ0FBQyxDQUFDQztnQkFDYixJQUFJQSxNQUFNO29CQUNSLE1BQU1DLFVBQVUsSUFBSUMsS0FBSzt3QkFBQ0Y7cUJBQUssRUFBRXBCLEtBQUt1QixJQUFJ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QVk7SUFDZDtJQUVBLHFCQUNFLDhEQUFDc0Q7UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNDO2dCQUFNRCxXQUFVOzBCQUE4Qjs7Ozs7OzBCQUMvQyw4REFBQ0U7Z0JBQ0NyRixNQUFLO2dCQUNMc0YsUUFBUTtnQkFDUkMsUUFBTztnQkFDUEMsVUFBVTNEO2dCQUNWNEQsVUFBVXRFLGFBQWFRO2dCQUN2QndELFdBQVU7Ozs7OztZQUVYaEUsMkJBQ0MsOERBQUMrRDtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNEO3dCQUNDQyxXQUFVO3dCQUNWTyxPQUFPOzRCQUFFeEcsT0FBTyxHQUFZLE9BQVRtQyxVQUFTO3dCQUFHOzs7Ozs7a0NBRWpDLDhEQUFDc0U7d0JBQUtSLFdBQVU7OzRCQUNibkIsS0FBSzRCLEdBQUcsQ0FBQ3ZFLFVBQVU7NEJBQUc7NEJBQUkyQyxLQUFLQyxLQUFLLENBQUMsV0FBWSxNQUFPMUM7NEJBQVk7NEJBQUVBOzRCQUFXOzs7Ozs7Ozs7Ozs7O1lBSXZGRSxZQUFZWCxNQUFNLEdBQUcsbUJBQ3BCLDhEQUFDb0U7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRDtrQ0FBSTs7Ozs7O2tDQUNMLDhEQUFDVzt3QkFBR1YsV0FBVTtrQ0FDWDFELFlBQVl1RCxHQUFHLENBQUMsUUFBa0I1QztnQ0FBakIsRUFBRTdELElBQUksRUFBRXdDLEtBQUssRUFBRTtpREFDL0IsOERBQUMrRTs7b0NBQWN2SCxLQUFLdUIsSUFBSTtvQ0FBQztvQ0FBR2lCOzsrQkFBbkJxQjs7Ozs7Ozs7Ozs7a0NBR2IsOERBQUMyRDt3QkFDQ1osV0FBVTt3QkFDVmEsU0FBU2xCO3dCQUNUVyxVQUFVOUQ7a0NBRVRBLFdBQVcsZ0JBQWdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNeEM7R0E5SXdCWDtLQUFBQSIsInNvdXJjZXMiOlsiL1ZvbHVtZXMvU2lsYmVyQXJyb3dzL0NPREVCQVNFL3NpbGJlcmFycm93c191di9jb21wb25lbnRzL21vZHVsZXMvdXYtY3JtL2NvbXBvbmVudHMvTWVkaWFVcGxvYWRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlQ2xpZW50JztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY2FySWQ6IHN0cmluZztcbiAgb25VcGxvYWRlZD86ICgpID0+IHZvaWQ7XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGFkZCBsaWdodCBncmV5IGdyYWRpZW50IGJhY2tncm91bmQgdG8gdHJhbnNwYXJlbnQgUE5Hc1xuY29uc3QgYWRkR3JhZGllbnRCYWNrZ3JvdW5kID0gYXN5bmMgKGZpbGU6IEZpbGUpOiBQcm9taXNlPEZpbGU+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgXG4gICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgXG4gICAgICBpZiAoIWN0eCkge1xuICAgICAgICByZXNvbHZlKGZpbGUpOyAvLyBmYWxsYmFjayB0byBvcmlnaW5hbCBpZiBjYW52YXMgY29udGV4dCBmYWlsc1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBsaWdodCBncmV5IGdyYWRpZW50IGJhY2tncm91bmRcbiAgICAgIGNvbnN0IGdyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICcjZjhmOGY4Jyk7ICAvLyBWZXJ5IGxpZ2h0IGdyZXkgYXQgdG9wXG4gICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMC41LCAnI2U4ZThlOCcpOyAvLyBMaWdodCBncmV5IGluIG1pZGRsZVxuICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsICcjZDhkOGQ4Jyk7ICAgLy8gTWVkaXVtIGxpZ2h0IGdyZXkgYXQgYm90dG9tXG4gICAgICBcbiAgICAgIC8vIEZpbGwgYmFja2dyb3VuZCB3aXRoIGdyYWRpZW50XG4gICAgICBjdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG4gICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIFxuICAgICAgLy8gRHJhdyB0aGUgb3JpZ2luYWwgaW1hZ2Ugb24gdG9wXG4gICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgY2FudmFzIGJhY2sgdG8gZmlsZVxuICAgICAgY2FudmFzLnRvQmxvYigoYmxvYikgPT4ge1xuICAgICAgICBpZiAoYmxvYikge1xuICAgICAgICAgIGNvbnN0IG5ld0ZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIGZpbGUubmFtZS5yZXBsYWNlKC9cXC5wbmckL2ksICdfd2l0aF9iZy5wbmcnKSwge1xuICAgICAgICAgICAgdHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IERhdGUubm93KClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXNvbHZlKG5ld0ZpbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUoZmlsZSk7IC8vIGZhbGxiYWNrIHRvIG9yaWdpbmFsXG4gICAgICAgIH1cbiAgICAgIH0sICdpbWFnZS9wbmcnLCAwLjk1KTtcbiAgICB9O1xuICAgIFxuICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgcmVzb2x2ZShmaWxlKTsgLy8gZmFsbGJhY2sgdG8gb3JpZ2luYWwgaWYgaW1hZ2UgbG9hZGluZyBmYWlsc1xuICAgIH07XG4gICAgXG4gICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gIH0pO1xufTtcblxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgUE5HIGhhcyB0cmFuc3BhcmVuY3lcbmNvbnN0IGhhc1BuZ1RyYW5zcGFyZW5jeSA9IGFzeW5jIChmaWxlOiBGaWxlKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gIGlmICghZmlsZS50eXBlLmluY2x1ZGVzKCdwbmcnKSkgcmV0dXJuIGZhbHNlO1xuICBcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgXG4gICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgXG4gICAgICBpZiAoIWN0eCkge1xuICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGltYWdlRGF0YS5kYXRhO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGFueSBwaXhlbHMgd2l0aCBhbHBoYSA8IDI1NSAodHJhbnNwYXJlbmN5KVxuICAgICAgICBmb3IgKGxldCBpID0gMzsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgICAgICBpZiAoZGF0YVtpXSA8IDI1NSkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBhY2Nlc3MgaW1hZ2UgZGF0YSAoQ09SUywgZXRjLiksIGFzc3VtZSBubyB0cmFuc3BhcmVuY3lcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBpbWcub25lcnJvciA9ICgpID0+IHJlc29sdmUoZmFsc2UpO1xuICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lZGlhVXBsb2FkZXIoeyBjYXJJZCwgb25VcGxvYWRlZCB9OiBQcm9wcykge1xuICBjb25zdCBbdXBsb2FkaW5nLCBzZXRVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJvZ3Jlc3MsIHNldFByb2dyZXNzXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbdG90YWxGaWxlcywgc2V0VG90YWxGaWxlc10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2ZhaWxlZEZpbGVzLCBzZXRGYWlsZWRGaWxlc10gPSB1c2VTdGF0ZTx7IGZpbGU6IEZpbGUsIGVycm9yOiBzdHJpbmcgfVtdPihbXSk7XG4gIGNvbnN0IFtyZXRyeWluZywgc2V0UmV0cnlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVzID0gYXN5bmMgKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmZpbGVzIHx8IFtdKTtcbiAgICBpZiAoIWZpbGVzLmxlbmd0aCkgcmV0dXJuO1xuICAgIHNldFVwbG9hZGluZyh0cnVlKTtcbiAgICBzZXRUb3RhbEZpbGVzKGZpbGVzLmxlbmd0aCk7XG4gICAgc2V0UHJvZ3Jlc3MoMCk7XG4gICAgc2V0RmFpbGVkRmlsZXMoW10pO1xuXG4gICAgbGV0IGZhaWxlZDogeyBmaWxlOiBGaWxlLCBlcnJvcjogc3RyaW5nIH1bXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmlsZXMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgY29uc3QgZmlsZSA9IGZpbGVzW2lkeF07XG4gICAgICBsZXQgdXBsb2FkRmlsZTogRmlsZSB8IEJsb2IgPSBmaWxlO1xuICAgICAgXG4gICAgICBpZiAoZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlJykpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDaGVjayBpZiBQTkcgaGFzIHRyYW5zcGFyZW5jeSBhbmQgYWRkIGJhY2tncm91bmQgaWYgbmVlZGVkXG4gICAgICAgICAgaWYgKGZpbGUudHlwZS5pbmNsdWRlcygncG5nJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhc1RyYW5zcGFyZW5jeSA9IGF3YWl0IGhhc1BuZ1RyYW5zcGFyZW5jeShmaWxlKTtcbiAgICAgICAgICAgIGlmIChoYXNUcmFuc3BhcmVuY3kpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFkZGluZyBsaWdodCBncmV5IGdyYWRpZW50IGJhY2tncm91bmQgdG8gdHJhbnNwYXJlbnQgUE5HOiAke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgICAgICAgdXBsb2FkRmlsZSA9IGF3YWl0IGFkZEdyYWRpZW50QmFja2dyb3VuZChmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gTm90ZTogSW1hZ2UgY29tcHJlc3Npb24gcmVtb3ZlZCAtIHVwbG9hZGluZyBvcmlnaW5hbCBxdWFsaXR5XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignSW1hZ2UgcHJvY2Vzc2luZyBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBvcmlnaW5hbCcsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZXh0ID0gZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKCk7XG4gICAgICBjb25zdCBwYXRoID0gYCR7Y2FySWR9LyR7Y3J5cHRvLnJhbmRvbVVVSUQoKX0uJHtleHR9YDtcblxuICAgICAgLy8gQ2hlY2sgaWYgY2FyIGFscmVhZHkgaGFzIG1lZGlhXG4gICAgICBjb25zdCB7IGNvdW50OiBwaG90b0NvdW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY2FyX21lZGlhJylcbiAgICAgICAgLnNlbGVjdCgnKicsIHsgaGVhZDogdHJ1ZSwgY291bnQ6ICdleGFjdCcgfSlcbiAgICAgICAgLmVxKCdjYXJfaWQnLCBjYXJJZClcbiAgICAgICAgLmVxKCdraW5kJywgJ3Bob3RvJyk7XG4gICAgICBjb25zdCBpc0ZpcnN0UGhvdG8gPSBmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UnKSAmJiAoIXBob3RvQ291bnQgfHwgcGhvdG9Db3VudCA9PT0gMCk7XG5cbiAgICAgIC8vIFVwbG9hZCB0byBTdG9yYWdlIGJ1Y2tldCAnY2FyLW1lZGlhJ1xuICAgICAgY29uc3QgeyBlcnJvcjogdXBFcnIgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcbiAgICAgICAgLmZyb20oJ2Nhci1tZWRpYScpXG4gICAgICAgIC51cGxvYWQocGF0aCwgdXBsb2FkRmlsZSwge1xuICAgICAgICAgIGNvbnRlbnRUeXBlOiB1cGxvYWRGaWxlLnR5cGUgfHwgZmlsZS50eXBlLFxuICAgICAgICAgIGNhY2hlQ29udHJvbDogJzM2MDAnLFxuICAgICAgICAgIHVwc2VydDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgaWYgKHVwRXJyKSB7XG4gICAgICAgIGZhaWxlZC5wdXNoKHsgZmlsZSwgZXJyb3I6IHVwRXJyLm1lc3NhZ2UgfSk7XG4gICAgICAgIHNldEZhaWxlZEZpbGVzKFsuLi5mYWlsZWRdKTtcbiAgICAgICAgc2V0UHJvZ3Jlc3MoTWF0aC5yb3VuZCgoKGlkeCArIDEpIC8gZmlsZXMubGVuZ3RoKSAqIDEwMCkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHBlcm1hbmVudCBwdWJsaWMgVVJMXG4gICAgICBjb25zdCB7IGRhdGE6IHB1YiB9ID0gc3VwYWJhc2Uuc3RvcmFnZS5mcm9tKCdjYXItbWVkaWEnKS5nZXRQdWJsaWNVcmwocGF0aCk7XG4gICAgICBjb25zdCB1cmwgPSBwdWIucHVibGljVXJsO1xuXG4gICAgICAvLyBJbmNyZW1lbnQgc29ydF9vcmRlciBmb3IgZWFjaCBuZXcgdXBsb2FkXG4gICAgICBsZXQgY3VycmVudE1heFNvcnRPcmRlciA9IGlkeDsgLy8gZmFsbGJhY2sgaWYgbm90IGZldGNoZWRcbiAgICAgIC8vIFN0b3JlIHRoZSBwdWJsaWMgVVJMIGluIERCIHdpdGggcHJvcGVyIHNvcnRfb3JkZXJcbiAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2Nhcl9tZWRpYScpLmluc2VydCh7XG4gICAgICAgIGNhcl9pZDogY2FySWQsXG4gICAgICAgIGtpbmQ6IGZpbGUudHlwZS5zdGFydHNXaXRoKCd2aWRlbycpID8gJ3ZpZGVvJyA6ICdwaG90bycsXG4gICAgICAgIHVybCxcbiAgICAgICAgaXNfcHJpbWFyeTogaXNGaXJzdFBob3RvLFxuICAgICAgICBzb3J0X29yZGVyOiBjdXJyZW50TWF4U29ydE9yZGVyLCAvLyBFbnN1cmUgcHJvcGVyIG9yZGVyaW5nXG4gICAgICB9KTtcblxuICAgICAgc2V0UHJvZ3Jlc3MoTWF0aC5yb3VuZCgoKGlkeCArIDEpIC8gZmlsZXMubGVuZ3RoKSAqIDEwMCkpO1xuICAgIH1cblxuICAgIHNldFByb2dyZXNzKDEwMCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRVcGxvYWRpbmcoZmFsc2UpO1xuICAgICAgc2V0UHJvZ3Jlc3MoMCk7XG4gICAgICBzZXRUb3RhbEZpbGVzKDApO1xuICAgICAgaWYgKG9uVXBsb2FkZWQpIG9uVXBsb2FkZWQoKTtcbiAgICB9LCA4MDApO1xuICAgIGUudGFyZ2V0LnZhbHVlID0gJyc7XG4gIH07XG5cbiAgY29uc3QgcmV0cnlGYWlsZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFmYWlsZWRGaWxlcy5sZW5ndGgpIHJldHVybjtcbiAgICBzZXRSZXRyeWluZyh0cnVlKTtcbiAgICAvLyBSZXRyeSBvbmx5IGZhaWxlZCBmaWxlc1xuICAgIGNvbnN0IGZpbGVzVG9SZXRyeSA9IGZhaWxlZEZpbGVzLm1hcChmID0+IGYuZmlsZSk7XG4gICAgc2V0RmFpbGVkRmlsZXMoW10pO1xuICAgIGF3YWl0IGhhbmRsZUZpbGVzKHsgdGFyZ2V0OiB7IGZpbGVzOiBmaWxlc1RvUmV0cnkgfSB9IGFzIGFueSk7XG4gICAgc2V0UmV0cnlpbmcoZmFsc2UpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTFcIj5cbiAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXdoaXRlLzcwIHRleHQteHNcIj5VcGxvYWQgUGhvdG9zIC8gVmlkZW9zPC9sYWJlbD5cbiAgICAgIDxpbnB1dFxuICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgIG11bHRpcGxlXG4gICAgICAgIGFjY2VwdD1cImltYWdlLyosdmlkZW8vKlwiXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlc31cbiAgICAgICAgZGlzYWJsZWQ9e3VwbG9hZGluZyB8fCByZXRyeWluZ31cbiAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZSB0ZXh0LXhzXCJcbiAgICAgIC8+XG4gICAgICB7dXBsb2FkaW5nICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JheS03MDAvNTAgaC0zIHJvdW5kZWQgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlXCI+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcmVkLTUwMCBoLTMgdHJhbnNpdGlvbi1hbGxcIlxuICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke3Byb2dyZXNzfSVgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHRleHQtWzEwcHhdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUvODBcIj5cbiAgICAgICAgICAgIHtNYXRoLm1heChwcm9ncmVzcywgMSl9JSAoe01hdGgucm91bmQoKHByb2dyZXNzIC8gMTAwKSAqIHRvdGFsRmlsZXMpfS97dG90YWxGaWxlc30pXG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICB7ZmFpbGVkRmlsZXMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXhzIHRleHQtcmVkLTQwMFwiPlxuICAgICAgICAgIDxkaXY+RmFpbGVkIHRvIHVwbG9hZDo8L2Rpdj5cbiAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwibGlzdC1kaXNjIG1sLTRcIj5cbiAgICAgICAgICAgIHtmYWlsZWRGaWxlcy5tYXAoKHsgZmlsZSwgZXJyb3IgfSwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgIDxsaSBrZXk9e2lkeH0+e2ZpbGUubmFtZX06IHtlcnJvcn08L2xpPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0xIHB4LTIgcHktMSBiZy1yZWQtNjAwIHRleHQtd2hpdGUgcm91bmRlZCB0ZXh0LXhzIGhvdmVyOmJnLXJlZC03MDBcIlxuICAgICAgICAgICAgb25DbGljaz17cmV0cnlGYWlsZWR9XG4gICAgICAgICAgICBkaXNhYmxlZD17cmV0cnlpbmd9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3JldHJ5aW5nID8gJ1JldHJ5aW5nLi4uJyA6ICdSZXRyeSBGYWlsZWQgVXBsb2Fkcyd9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwic3VwYWJhc2UiLCJhZGRHcmFkaWVudEJhY2tncm91bmQiLCJmaWxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJ3aWR0aCIsImhlaWdodCIsImdyYWRpZW50IiwiY3JlYXRlTGluZWFyR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImRyYXdJbWFnZSIsInRvQmxvYiIsImJsb2IiLCJuZXdGaWxlIiwiRmlsZSIsIm5hbWUiLCJyZXBsYWNlIiwidHlwZSIsImxhc3RNb2RpZmllZCIsIkRhdGUiLCJub3ciLCJvbmVycm9yIiwic3JjIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiaGFzUG5nVHJhbnNwYXJlbmN5IiwiaW5jbHVkZXMiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJkYXRhIiwiaSIsImxlbmd0aCIsImVycm9yIiwiTWVkaWFVcGxvYWRlciIsImNhcklkIiwib25VcGxvYWRlZCIsInVwbG9hZGluZyIsInNldFVwbG9hZGluZyIsInByb2dyZXNzIiwic2V0UHJvZ3Jlc3MiLCJ0b3RhbEZpbGVzIiwic2V0VG90YWxGaWxlcyIsImZhaWxlZEZpbGVzIiwic2V0RmFpbGVkRmlsZXMiLCJyZXRyeWluZyIsInNldFJldHJ5aW5nIiwiaGFuZGxlRmlsZXMiLCJlIiwiZmlsZXMiLCJBcnJheSIsImZyb20iLCJ0YXJnZXQiLCJmYWlsZWQiLCJpZHgiLCJ1cGxvYWRGaWxlIiwic3RhcnRzV2l0aCIsImhhc1RyYW5zcGFyZW5jeSIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJ3YXJuIiwiZXh0Iiwic3BsaXQiLCJwb3AiLCJwYXRoIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImNvdW50IiwicGhvdG9Db3VudCIsInNlbGVjdCIsImhlYWQiLCJlcSIsImlzRmlyc3RQaG90byIsInVwRXJyIiwic3RvcmFnZSIsInVwbG9hZCIsImNvbnRlbnRUeXBlIiwiY2FjaGVDb250cm9sIiwidXBzZXJ0IiwicHVzaCIsIm1lc3NhZ2UiLCJNYXRoIiwicm91bmQiLCJwdWIiLCJnZXRQdWJsaWNVcmwiLCJ1cmwiLCJwdWJsaWNVcmwiLCJjdXJyZW50TWF4U29ydE9yZGVyIiwiaW5zZXJ0IiwiY2FyX2lkIiwia2luZCIsImlzX3ByaW1hcnkiLCJzb3J0X29yZGVyIiwic2V0VGltZW91dCIsInZhbHVlIiwicmV0cnlGYWlsZWQiLCJmaWxlc1RvUmV0cnkiLCJtYXAiLCJmIiwiZGl2IiwiY2xhc3NOYW1lIiwibGFiZWwiLCJpbnB1dCIsIm11bHRpcGxlIiwiYWNjZXB0Iiwib25DaGFuZ2UiLCJkaXNhYmxlZCIsInN0eWxlIiwic3BhbiIsIm1heCIsInVsIiwibGkiLCJidXR0b24iLCJvbkNsaWNrIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/modules/uv-crm/components/MediaUploader.tsx\n"));

/***/ })

});